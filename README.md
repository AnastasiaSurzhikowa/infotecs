# Multi-Server Client (OS Linux)

## Описание клиента:

Его основная задача — подключаться к серверу (C++ или Dart) и отправлять туда данные для обработки.

Что можно делать в клиенте:

1. **Выбрать сервер для подключения** — в верхней части приложения есть переключатель: сервер на C++ (порт 3000) или сервер на Dart (порт 4041). Это значит, что можно протестировать работу сразу двух серверов и сравнить их.  
2. **Ввести строку из цифр** — в поле ввода можно набрать любое количество цифр (например: 123456). 
3. **Отправить данные на сервер** — при нажатии кнопки "Send" введённая строка уходит на выбранный сервер.
4. **Посмотреть обработанный результат** -  возможность использования удобного интерфейса вместо ручного тестирования в терминале.
5. **Менять сервер в любой момент** - можно переключаться между C++ сервером и Dart сервером, не перезапуская клиент.

2 режима (переключение между серверами):

Сервер на C++:
<img width="1332" height="819" alt="Снимок экрана 2025-08-27 002024" src="https://github.com/user-attachments/assets/6f24faee-ff24-4354-9fc9-64e612657ba0" />

Сервер на Dart:
<img width="1332" height="819" alt="Снимок экрана 2025-08-27 002058" src="https://github.com/user-attachments/assets/f75a2e81-a75e-41fe-b919-df22aefde82e" />

## Данный проект состоит из трёх частей:

1. **Program1_stage4** — сервер на **C++**.  
2. **Program2_dart** — сервер на **Dart**.  
3. **program2_flutter** — клиент на **Flutter**, позволяющий подключаться к любому из серверов.  

---

## Установка необходимых инструментов

Перед началом убедитесь, что на вашей системе установлены следующие пакеты:

- **g++** (компилятор для C++)  
- **CMake** (для сборки проекта на C++)  
- **Dart SDK** (для запуска сервера на Dart)  
- **Flutter SDK** (для запуска клиента на Flutter)  

### Проверка:
```bash
g++ --version
cmake --version
flutter --version  
dart --version      
```

## Распаковка архива

```bash
unzip my_project.zip
```

После этого появятся папки Program1_stage4, Program2_dart, program2_flutter и файл README.md.
Если захотите распаковать в отдельную папку, создайте её и добавьте опцию -d:

```bash
mkdir my_project
unzip my_project.zip -d my_project
cd my_project
```

## Сборка и запуск C++ сервера

Описание программы:

Поток 1. Принимает строку, которую введет пользователь. Далее проверка, что строка состоит только из цифр и не превышает 64 символа. После проверки строка отсортирована по убыванию и все элементы, значение которых чётно, заменены на латинские буквы «КВ». После данная строка помещается в общий буфер и поток должен ожидать дальнейшего ввода пользователя.

Поток 2. Должен обрабатывать данные которые помещаются в общий буфер. Поток выводит полученные данные на экран, рассчитывает общую сумму всех элементов, которые являются численными значениями. Полученную сумму передаёт в следующую программу, реализованную на **dart/flutter**. После этого поток ожидает следующие данные.

Для сборки и запуска откройте терминал и выполните:
```bash
cd ~/my_project/Program1_stage4
mkdir -p build
cd build
# Очистить старый кэш (чтобы не было ошибок):
rm -rf *
cmake ..
make
./program1
```
Сервер будет ожидать подключения клиента на порту 3000.

Что делает сервер C++:
- Принимает ввод из консоли;
- Проверяет: только цифры, длина 1..64;
- Сортирует по убыванию и заменяет чётные цифры на **KV** (результат замены можно посмотреть в терминале);
- Пишет результат в общий буфер;
- Поток обработки получает строку, считает сумму цифр и отправляет клиенту (если клиент подключён) ответ в формате **SUM:<число>\n** или ошибку **ERROR: ...\n**.

## Запуск Dart-сервера

Откройте новую вкладку в терминале, выполните:
```bash
cd ~/my_project/Program2_dart
dart run server.dart
```
Сервер будет слушать порт 4041.

Описание программы:

Ожидает данные о сумме цифр от сервера на **c++**. Также можно ввести значение, потом произойдёт анализ из скольки символов оно состоит. Если оно больше 2-ух символов и если оно кратно 32 выводит сообщение о принятых данных, иначе выводится сообщение об ошибке. Далее программа продолжает ожидать данные.

## Запуск Flutter-клиента

Откройте новую вкладку в терминале, выполните:
```bash
cd ~/my_project/program2_flutter/build/linux/x64
# Очистить старую сборку
rm -rf *
cd ~/my_project/program2_flutter
flutter run -d linux
```

В приложении:
- В выпадающем списке выберите **C++ server (127.0.0.1:3000)** или **Dart server (127.0.0.1:4041)** (есть пресеты).
- Нажмите Connect (или кнопку, если в интерфейсе) — приложение попытается подключиться.



